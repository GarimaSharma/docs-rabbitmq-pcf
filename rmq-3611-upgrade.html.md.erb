---
title: Upgrading to RabbitMQ 3.6.11 or higher from RabbitMQ 3.6.10 or below
owner: RabbitMQ Tile
---

**Major Change**: RabbitMQ may now report much higher memory usage than before
- this is does not mean that the server instances are using more memory,
rather the memory they are using is now reported correctly. See the
[RabbitMQ Release Notes]
(https://github.com/rabbitmq/rabbitmq-server/releases/tag/rabbitmq_v3_6_11)
for more detail. Prior to upgrading, it is necessary to compare the memory
used by the RabbitMQ server nodes against the high watermark:

![Configure syslog pane](high_watermark.png)

<%= image_tag("images/high_watermark.png") %>

If the memory used is more than 45% of the "High Watermark", it will be
necessary to increase the amount of memory allocated to the "RabbitMQ Server"
job to avoid the risk of publishers blocking. For the new memory allocation
the following must hold true: *0.4m>2.5n*, where m is the new memory allocation,
and n is the greatest amount of memory currently used by any Rabbit node. For
example, if the most memory used amongst all nodes is 4.8GiB, then each node
should be allocated *2.5Ã—4.8=12; 12/0.4=30* GiB of RAM.

If the memory used is less than 45% of the High Watermark, then memory alarms
may be triggered after the upgrade, and it is likely that Rabbit will page out
certain things to disk (as documented
[here](https://www.rabbitmq.com/memory.html#memsup-paging)) - this is normal,
and is not cause for concern. However, if it is necessary that Rabbit avoid
paging to disk, then the amount of memory allocated to the job will need to be
increased, as above, but with the condition: *0.2m>2.5n*.
