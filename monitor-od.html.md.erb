---
title: Monitoring RabbitMQ for PCF as an On-Demand Service
owner: London Services
---

This topic explains how to monitor the health of the RabbitMQ for Pivotal Cloud Foundry (PCF) service using the logs and metrics generated by RabbitMQ for PCF component VMs.

See [Logging and Metrics](http://docs.pivotal.io/pivotalcf/loggregator/index.html) for general information about logging and metrics in PCF.

## <a id="logs"></a>Collect Logs

In RabbitMQ for PCF, you can designate an external syslog endpoint for RabbitMQ logs through Ops Manager at deployment time by performing the following steps:

1. From the Ops Manager Installation Dashboard, click the RabbitMQ tile.
1. In the RabbitMQ tile, click the **Settings** tab.
1. Click **Syslog**.
1. Enter your syslog address and port.
1. Click **Save**.
1. Return to the Ops Manager Installation Dashboard and click **Apply Changes** to redeploy with the changes.

## <a id="logformat"></a>Log Formats

A correctly configured system emits metrics for the RabbitMQ on-demand service broker the service. 

RabbitMQ servers are configured to log at the <code>info</code> level, and capture errors, warnings and informational messages.

## <a id="metrics"></a>Metrics

The Loggregator Firehose exposes the RabbitMQ metrics and can direct these metrics to an external endpoint of your choice.

The metrics polling interval defaults to 30 seconds.
This interval is a configuration option on the RabbitMQ tile (**Settings** > **RabbitMQ**).

Metrics are long, single lines of text that follow the format:

```
origin:"p.rabbitmq" eventType:ValueMetric timestamp:1441188462382091652 deployment:"cf-rabbitmq" job:"cf-rabbitmq-node" index:"0" ip:"10.244.3.46" valueMetric: < name:"/p.rabbitmq/rabbitmq/system/memory" value:1024 unit:"MB">
```

###<a id="rabbitmq-metrics"></a>RabbitMQ&nbsp;Metrics

The RabbitMQ on-demand broker emits the following metrics. The full name of each metric follows the format: `/p.rabbitmq/COMPONENT/METRIC-NAME`

