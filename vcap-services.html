<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
            
            <!-- Always force latest IE rendering engine or request Chrome Frame -->
            <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
                
                <!-- Use title if it's in the page YAML frontmatter -->
                <title>RabbitMQ Entries in the VCAP_SERVICES Environment Variable | Pivotal RabbitMQ Docs</title>
                
                <link href="../../stylesheets/master.css" media="screen,print" rel="stylesheet" type="text/css" />
                <link href="../../stylesheets/breadcrumbs.css" media="screen,print" rel="stylesheet" type="text/css" />
                <link href="../../stylesheets/search.css" media="screen,print" rel="stylesheet" type="text/css" />
                <link href="../../stylesheets/printable.css" media="print" rel="stylesheet" type="text/css" />                
                <script src="../../javascripts/all.js" type="text/javascript"></script>                         
                <link href='/images/favicon.ico' rel='shortcut icon'></link></meta></meta>                  
    </head>    
    <body class="devguide devguide_deploy-apps devguide_deploy-apps_index">
        <div class='header-wrap'>
            <div class='container por'>
                <div class='logo-wrap'>
                    <a href="/" class="pngfix logo"></a>
                </div>
                <div class='logo-pivotal'>
                    RabbitMQ
                </div>
            </div>
            <div class="header-shadow">
            </div>
        </div>
        <div class="main-wrap">
            <div class="container">
                <div id="sub-nav" class="nav-container">
                    <ul class="menu">
                        <li class="first expanded js-maintopic"><a id='home-nav-link' href="/rabbmq-cf/index.html">Overview</a></li>
                        <li class="first expanded js-maintopic"><a href="/rabbmq-cf/managing.html">Installing and Managing the RabbitMQ Service</a></li>
                        <li class="first expanded js-maintopic"><a href="/rabbmq-cf/vcap-services.html">RabbitMQ Entries in the VCAP_SERVICES Environment Variable</a></li>
                        <li class="first expanded js-maintopic"><a href="/rabbmq-cf/rabbitmq-cluster.html">Accessing the RabbitMQ Cluster Directly</a></li>
                        <li class="first expanded js-maintopic"><a href="http://previous.rabbitmq.com/v3_1_x/documentation.html"  target="_blank">Using RabbitMQ</a></li>
                    </ul>
                    </li>
                    </ul>
                </div>
                <div class="body-container content">
                    <!-- Google CSE Search Box -->
                    <script>
          (function() {
              var cx = '005804290371689664731:n1ix15a_ysy';
              var gcse = document.createElement('script');
              gcse.type = 'text/javascript';
              gcse.async = true;
              gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                      '//www.google.com/cse/cse.js?cx=' + cx;
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(gcse, s);
          })();
      </script>
                    <gcse:search></gcse:search>
                    
                    <ul class="breadcrumbs"> <li><a href="index.html">Pivotal RabbitMQ Documentation</a></li> <li class="active"><span>RabbitMQ Entries in the VCAP_SERVICES Environment Variable</span></li></ul>
                    
                    <h3 class="title-container">RabbitMQ Entries in the VCAP_SERVICES Environment Variable</h3>
                    <p>Applications running in Pivotal CF can access service instances that are bound to them by credentials passed to them through the VCAP_SERVICES environment variable.</p>
                    <h3>Example</h3>
                    <p><pre><code>
 {"p-rabbitmq-3.1.5":
  [{"name": "myrabbit",
    "label": "p-rabbitmq-3.1.5",
    "tags":["rabbitmq","messaging","message-queue","amqp"],
    "plan": "standard",
    "credentials":
      {"uri": "amqp://u6e10e2df0903ecac86bc03f396c6d2b56089769b:p262615006c0001a482577e0d7a5400dca3ed40c3@10.26.152.25/5686900df5c8a9fa28668536ce0d3ddba206c3d4",
       "vhost": "5686900df5c8a9fa28668536ce0d3ddba206c3d4",
       "username": "u6e10e2df0903ecac86bc03f396c6d2b56089769b",
       "password": "p262615006c0001a482577e0d7a5400dca3ed40c3",
       "hostname": "10.26.152.25",
       "http_api_uri": "http://u6e10e2df0903ecac86bc03f396c6d2b56089769b:p262615006c0001a482577e0d7a5400dca3ed40c3@10.26.152.25:15672/api/",
       "protocols":
         {"amqp":
           {"uri": "amqp://u6e10e2df0903ecac86bc03f396c6d2b56089769b:p262615006c0001a482577e0d7a5400dca3ed40c3@10.26.152.25:5672/5686900df5c8a9fa28668536ce0d3ddba206c3d4",
            "username": "u6e10e2df0903ecac86bc03f396c6d2b56089769b",
            "password": "p262615006c0001a482577e0d7a5400dca3ed40c3",
            "port": 5672,
            "host": "10.26.152.25",
            "vhost": "5686900df5c8a9fa28668536ce0d3ddba206c3d4"},
          "management":
            {"uri": "http://u6e10e2df0903ecac86bc03f396c6d2b56089769b:p262615006c0001a482577e0d7a5400dca3ed40c3@10.26.152.25:15672/api/",
             "username": "u6e10e2df0903ecac86bc03f396c6d2b56089769b",
             "password": "p262615006c0001a482577e0d7a5400dca3ed40c3",
             "port": 15672,
             "host": "10.26.152.25",
             "path": "/api/"}
         }
      }
   }]</code></pre></p>
                    <p>Two sets of <code>credentials</code> object properties are available:</p>
                    <ul>
                        <li>The <code>uri</code>, <code>vhost</code>, <code>username</code>, <code>password</code> and <code>hostname</code> properties are provided for backward compatibility with other cloud messaging providers. These properties only provide access to RabbitMQ over AMQP, and therefore using them is discouraged.</li>
                        <li>The <code>credentials.protocols</code> object is more flexible. This object includes a key for each protocol enabled in the RabbitMQ broker. 
                            The example includes keys for AMQP and management, but other possible keys include MQTT and STOMP. Note that if SSL is enabled via the installer, 
                            then the keys for AMQP and management are adjusted to <code>amqp+ssl</code> and <code>management+ssl</code> respectively. However, other protocols are not adjusted automatically
                            for use with the supplied SSL keys and require configuration by supplying a custom <strong>rabbitmq.config</strong> file via the installer.
                            <p>The values associated with each of these keys gives access credentials specific to each protocol. Each associated object contains a full URI along with the individual components to facilitate ease of use with client libraries that do not support the full URIs.</p></li>
                    </ul>
                    <h3>Updating the VCAP_SERVICES Environment Variable</h3>
                    <p>If you adjust the plugins and protocols enabled for RabbitMQ via the installer, then you will need to force the <code>VCAP_SERVICES</code> environment 
                        variables to be regenerated. In common with all services in Pivotal CF, the <code>VCAP_SERVICES</code> environment variable for an 
                        application is only modified when the application is bound to a service instance. To update the variable so that it reflects the current set 
                        of protocols and features enabled in RabbitMQ, you need to unbind the application from the relevant RabbitMQ service instance and then rebind it, and restart the application. The application should then find the updated environment variables reflecting the current set 
                        of enabled protocols.</p>
                </div>
            </div>
        </div>
        
        <div class='footer-wrap'>
            <div class="container">
                <div class='span-2'>
                    <p class='fss link-list'>
                        <a href="http://www.gopivotal.com/about-pivotal/contact-us">Contact Us</a>
                        |
                        <a href="http://www.gopivotal.com/privacy-policy">Privacy Policy</a>
                        |
                        <a href="http://www.gopivotal.com/terms-of-use">Terms of Use</a>
                    </p>
                </div>
                <div class="span-4 last">
                    <p class='fss fclightgray right'>
                        &copy;
                        <script>
            //<![CDATA[
            var d = new Date();
            document.write(d.getFullYear());
            //]]>
        </script>
                        GoPivotal, Inc. All rights reserved.
                    </p>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('625-IUJ-009');
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>
    </body>
</html>
